\subsection{Modelo conceptual}

\begin{figure}[H]
\includegraphics[width=\linewidth]{diag/viejos/conc1.png}
\end{figure}
\begin{figure}[H]
\includegraphics[width=\linewidth]{diag/viejos/conc2.png}
\end{figure}

\subsubsection{Condiciones OCL}
\begin{itemize}
		\item	\textbf{Momentos en los cuales se puede redefinir el PM o proveedor de un proyecto:}
	
			Context: Proyecto
			
			\begin{tabular}{ll}
				self.redefiniendoProveedor $\Rightarrow$	& BuscandoProveedor < self.Status $\leq$ ObraEnCurso	\\
				self.redefiniendoPM $\Rightarrow$			& EligiendoPM < self.Status $\leq$ ObraEnCurso			\\
			\end{tabular}

	\item \textbf{Estado del proyecto:}

			Context: Proyecto
			
			\begin{tabular}{ll}
				\laterThan{EligiendoPM}				& \notEmpty{self.historicoPM} and	\\
													& ((self.redefiniendoPM) xor \\
													& (self.historicoPM\applyParam{exists}{pm$|$pm.Actual}))	\\
				
				and \laterThan{DefiniendoAlcance}	& \notEmpty{self.Alcances} \\
				
				and \laterThan{BuscandoProveedor}	& self.Alcances\applyParam{select}{a$|$a.Actual}.Seleccionada\notEmpty{}	\\
				
				and \laterThan{FirmandoContratos}	& \notEmpty{contratoCliente(self, self.Solicitante)} and	\\
													& (self.redefiniendoProveedor xor							\\
													& self.Alcances\applyParam{select}{a$|$a.Actual}.ContratoProveedor	\\
													& \notEmpty{})	\\
				
				and \laterThan{ConsiguiendoFeedback}	& self.HistoricoPM\applyParam{forAll}{a$|$
				a.\notEmpty{Feedback}} and	\\
														& self.Alcances\applyParam{collect}{AsignacionProveedor} \\
														& \applyParam{forAll}{a$|$a.Feedback\notEmpty{}} \\
			\end{tabular}
			
	\item \textbf{Seguro de caución al día para proyectos actuales:}
	
			Context: Alcance Proyecto
			
			self.Actual $\Rightarrow$ (\notEmpty{self.Seleccionada.Proveedor.Seguro} \\
			and self.Seleccionada.Proveedor.Seguro.Vencimiento	\\
			$\geq$ self.ContratoProveedor.FechaFin)	\\
			
			%(self.Actual and self.Proyecto.Status $\in$ [BuscandoProveedor, obraEnCurso]	\\
			%and \notEmpty{self.PropuestaProveedor.contratoProveedor}) 		\\
			%$\Rightarrow$ (\notEmpty{self.Proveedor.Seguro} and self.Proveedor.Seguro.Vencimiento	\\
			%> self.PropuestaProveedor.contratoProveedor.FechaFin)	\\
			
	\item \textbf{Los puntajes de los agentes se corresponden con los puntajes seg\'un proyectos:}
			
			Context: PM
			
			self.puntaje ==	self.Asignaciones\applyParam{collect}{FeedbackPM}\applyParam{collect}{Calificacion}\apply{average}
			\footnote{Consideramos que average de vacío da 0.}
			
			Context: Proveedor
			
			self.puntaje ==	self.Asignaciones\applyParam{collect}{FeedbackProv}\applyParam{collect}{Calificacion}\apply{average}
			\footnote{Idem nota anterior}
			
	
	\item \textbf{Las asignaciones no se pisan en tiempo}
	
			Context: Proyecto
			
			self.Alcances\applyParam{collect}{AsignacionProveedor}\applyParam{forAll}{a1 $\neq$ a2$\|$a1.Inicio > a2.Fin or a2.Inicio > a1.Fin}
	
	\item \textbf{Hay a lo sumo un alcance actual y una asignación de PM actual}
	
			Context: Proyecto
			
			self.Alcances\applyParam{select}{a$\|$a.Actual}\apply{size} $\leq$ 1
			
			self.HistoricoPM\applyParam{select}{a$\|$a.Actual}\apply{size} $\leq$ 1
			
			self.Status > ObraEnCurso $\Rightarrow$ self.Alcances\applyParam{select}{a$\|$a.Actual}\apply{size} = 0
			
	\item \textbf{Ciclo Proveedor - Asignaci\'on - Propuesta}
	
			Context: Asignación Proveedor
			
			self.Proveedor == self.Seleccionada.Proveedor
	
	%\item \textbf{Los estados del proyecto pero para el otro lado?}
	%\item \textbf{Fechas de los reportes?}
	%\item \textbf{Solapamiento de PMs historico}
	%\item \textbf{Solapamiento de proveedores historico?}
	%\item \textbf{Porcentaje de las comisiones}
	%\item \textbf{Fechas de fin luego de fechas de inicio}
	
\end{itemize}
